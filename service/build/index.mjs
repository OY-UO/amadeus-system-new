import s from"http";import t from"express";import n from"cors";import{createProxyMiddleware as c}from"http-proxy-middleware";var r=t();r.use(n());r.use(t.json({limit:"20mb"}));r.use(t.urlencoded({extended:!0}));r.set("trust proxy",!0);var i=function(e,u){return!e.startsWith("/api")};r.use("/",c(i,{target:"http://127.0.0.1:4173",changeOrigin:!0,ws:!0,onError:e=>{console.error("\u4EE3\u7406\u9519\u8BEF:",e)}}));var p=s.createServer(r),o=process.env.PORT||3002;p.listen(o,()=>console.log(`HTTP \u548C WebSocket \u670D\u52A1\u5668\u8FD0\u884C\u5728\u7AEF\u53E3 ${o}`));
